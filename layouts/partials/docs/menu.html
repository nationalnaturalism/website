<header role="banner">
<a title="Lien ramenant vers la page d'accueil" href="{{$.Site.Home.RelPermalink}}">
{{with resources.Get .Site.Params.brand}}
<img alt="Logo du site" src="{{.RelPermalink}}" width="{{.Width}}" height="{{.Height}}">
{{end}}
</a>
<div>{{site.Title}}</div>
</header>
<div role="search"></div>
<script type="text/javascript" src="/pagefind/pagefind-ui.js"></script>
<script type="text/javascript">
    window.addEventListener('DOMContentLoaded', (event) => {
	new PagefindUI({
        element: "[role=search]",
        showImages: false,
        excerptLength: 12,
        showSubResults: true,
        translations: {
        	clear_search: "â•³",
        }
    });});
</script>
{{ if .Site.IsMultiLingual }}
	{{ partial "docs/languages" . }}
{{ end }}
{{ template "menu-hugo" .Site.Menus.before }}
{{ template "menu-filetree" (slice (site.GetPage "docs") .Page) }}
<a class="last button" href="mailto:{{site.Params.mail}}">Contact us</a>

{{ define "menu-hugo" }}
<menu class="essentials">
  {{ range .}}
  <li>
    <a href="{{ .URL }}" {{ if not .Page }} rel="noopener"{{ end }}>
      {{- .Pre -}}
      {{ with .Page }}
        {{ .Page.LinkTitle|.RenderString }}
      {{ else }}
        {{ .Name }}
      {{ end }}
      {{- .Post -}}
    </a>
    {{- with .Children }}
      {{ template "menu-hugo" . }}
    {{- end }}
  </li>
  {{ end }}
</menu>
{{ end }}

{{ define "menu-filetree" }}
<menu role="navigation" class="filetree">
	{{$currentpage := index . 1 }}
	{{range where (index . 0).Pages "Params.bookHidden" false }}
	{{$iscurrent := eq . $currentpage}}
	{{$isancestor := .IsAncestor $currentpage}}
	<li>
		{{ if .IsSection }}
		<details {{if $isancestor}}class="ancestor" open{{end}}>
	    <summary role="button">
	    	{{- .Page.LinkTitle|.RenderString -}}
	    </summary>
	    {{ template "menu-filetree" (slice . $currentpage) }}
		</details>
	 	{{ else }}
		<a href="{{ .Page.RelPermalink }}" {{if $iscurrent}}aria-current="page"{{end}}>{{- .Page.LinkTitle|.RenderString -}}</a>
		{{end}}
	</li>
	{{ end }}
</menu>
{{ end }}


